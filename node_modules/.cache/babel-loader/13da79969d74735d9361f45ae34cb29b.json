{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/joao/Downloads/Projects/web-countries/src/views/Home/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport CardItem from '../../components/card-item';\nimport Header from '../../components/header';\nimport { MainWrapper } from '../../theme/style-common';\nimport { BoxList } from './style';\nimport { useHistory } from 'react-router-dom';\nimport ReactLoading from 'react-loading';\nexport default function Home() {\n  _s();\n\n  const [countries, setCountries] = useState([]);\n  const [filteredList, setFilteredList] = useState([]);\n\n  const prepareItemCard = item => {\n    return item.map(element => {\n      return {\n        image: element.flag.svgFile,\n        title: element.name,\n        subtitle: element.capital,\n        id: element.alpha3Code,\n        context: element\n      };\n    });\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetch('https://countries-274616.ew.r.appspot.com', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: `\n                    query {\n                        Country {\n                          name\n                          capital\n                          alpha3Code\n                          flag {\n                            svgFile\n                          }\n                        }\n                      }\n                `\n        })\n      }).then(res => res.json()).then(res => {\n        let fList = prepareItemCard(res.data.Country);\n        setCountries(fList);\n        setFilteredList(fList);\n      }).catch(err => console.log(err));\n    }\n\n    fetchData();\n  }, []);\n  let history = useHistory();\n\n  const toDetails = id => {\n    history.push(`/details?id=${id}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [filteredList && filteredList.length > 0 && /*#__PURE__*/_jsxDEV(Header, {\n      title: \"Country List\",\n      countries: countries,\n      filtered: setFilteredList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(MainWrapper, {\n      children: /*#__PURE__*/_jsxDEV(BoxList, {\n        children: [filteredList.map((item, index) => /*#__PURE__*/_jsxDEV(CardItem, {\n          item: item,\n          onClick: () => toDetails(item.id)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this)), filteredList && filteredList.length === 0 && /*#__PURE__*/_jsxDEV(ReactLoading, {\n          type: 'balls',\n          color: '#000',\n          height: '10%',\n          width: '10%',\n          delay: '200'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"ghLOL+yqnkWalHlFnJj+OTHq68o=\", false, function () {\n  return [useHistory];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/joao/Downloads/Projects/web-countries/src/views/Home/index.js"],"names":["React","useState","useEffect","CardItem","Header","MainWrapper","BoxList","useHistory","ReactLoading","Home","countries","setCountries","filteredList","setFilteredList","prepareItemCard","item","map","element","image","flag","svgFile","title","name","subtitle","capital","id","alpha3Code","context","fetchData","fetch","method","headers","body","JSON","stringify","query","then","res","json","fList","data","Country","catch","err","console","log","history","toDetails","push","length","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport CardItem from '../../components/card-item';\nimport Header from '../../components/header';\nimport { MainWrapper } from '../../theme/style-common';\nimport { BoxList } from './style';\nimport { useHistory } from 'react-router-dom';\n\n\nimport ReactLoading from 'react-loading';\n\nexport default function Home() {\n\n    const [countries, setCountries] = useState([]);\n    const [filteredList, setFilteredList] = useState([]);\n\n    const prepareItemCard = (item) => {\n        return item.map(element => { return { image: element.flag.svgFile, title: element.name, subtitle: element.capital, id: element.alpha3Code, context: element }});\n    }\n\n    useEffect(() => {\n        async function fetchData() {\n            await fetch('https://countries-274616.ew.r.appspot.com', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    query: `\n                    query {\n                        Country {\n                          name\n                          capital\n                          alpha3Code\n                          flag {\n                            svgFile\n                          }\n                        }\n                      }\n                ` })\n            })\n                .then(res => res.json())\n                .then(res => {\n                    let fList = prepareItemCard(res.data.Country)\n                    setCountries(fList)\n                    setFilteredList(fList)\n                })\n                .catch(err => console.log(err))\n        }\n        fetchData();\n    }, []);\n\n    let history = useHistory();\n\n    const toDetails = (id) => {\n        history.push(`/details?id=${id}`)\n    }\n\n\n\n    return (\n        <>\n            {\n                filteredList && filteredList.length > 0 &&\n                    <Header title=\"Country List\" countries={countries} filtered={setFilteredList}></Header>\n                }\n            \n            <MainWrapper>\n                <BoxList>\n                    {\n                        filteredList.map((item, index) => (\n                            <CardItem key={index} item={item} onClick={() => toDetails(item.id)} />\n                        ))\n                    }\n                    {   filteredList && filteredList.length === 0 &&\n                        <ReactLoading type={'balls'} color={'#000'} height={'10%'} width={'10%'} delay={'200'} />\n\n                    }\n\n                </BoxList>\n            </MainWrapper>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}